# MusicSpree Configuration
# Copy this file to .env and fill in your actual values

# =============================================================================
# LastFM API Configuration (REQUIRED)
# Get your API credentials at: https://www.last.fm/api/account/create
# =============================================================================
LASTFM_API_KEY=your_lastfm_api_key_here
LASTFM_USERNAME=your_lastfm_username
LASTFM_SHARED_SECRET=your_lastfm_shared_secret

# =============================================================================
# Navidrome Configuration (REQUIRED)
# Your Navidrome music server details
# =============================================================================
NAVIDROME_URL=http://navidrome:4533
NAVIDROME_USERNAME=admin
NAVIDROME_PASSWORD=your_secure_navidrome_password

# =============================================================================
# Soulseek/Slskd Configuration (REQUIRED)
# Download service for music files
# =============================================================================
SLSKD_URL=http://slskd:5030
SLSKD_API_KEY=your_slskd_api_key_here

# Slskd-specific environment variables
SLSKD_USERNAME=your_soulseek_username
SLSKD_PASSWORD=your_soulseek_password
SLSKD_SHARED_DIR=/downloads
SLSKD_DOWNLOAD_DIR=/downloads

# =============================================================================
# Beets Configuration (OPTIONAL)
# Music library management and metadata processing
# =============================================================================
BEETS_URL=http://beets:8337
BEETS_CONFIG_PATH=/config
BEETS_MUSIC_DIR=/music

# =============================================================================
# Scheduling Configuration
# =============================================================================
# Cron schedule for automatic sync (default: every 6 hours)
# Format: minute hour day month weekday
# Examples:
#   0 */6 * * *    - Every 6 hours
#   0 2 * * *      - Daily at 2 AM
#   0 2 * * 1      - Weekly on Monday at 2 AM
CRON_SCHEDULE=0 */6 * * *

# Timezone for cron scheduling (optional)
TZ=UTC

# =============================================================================
# Playlist Configuration
# =============================================================================
# Name of the playlist to create/update in Navidrome
PLAYLIST_NAME=LastFM Recommendations

# Whether to clear the playlist before adding new tracks
CLEAN_PLAYLISTS_ON_REFRESH=true

# Whether to keep downloaded tracks when clearing playlists
KEEP_DOWNLOADED_TRACKS=true

# =============================================================================
# Download Configuration
# =============================================================================
# Maximum number of retry attempts for failed downloads
MAX_DOWNLOAD_RETRIES=5

# Timeout in minutes for individual downloads
DOWNLOAD_TIMEOUT_MINUTES=10

# Number of concurrent downloads (be nice to the network)
CONCURRENT_DOWNLOADS=3

# =============================================================================
# Logging Configuration
# =============================================================================
# Log level: error, warn, info, http, verbose, debug, silly
LOG_LEVEL=info

# Whether to write logs to file (in addition to console)
LOG_TO_FILE=true

# =============================================================================
# Development/Testing Options
# =============================================================================
# Enable dry run mode (show what would be downloaded without actually downloading)
DRY_RUN=false

# Run sync on container startup (useful for development)
RUN_ON_STARTUP=false

# Node.js environment
NODE_ENV=production

# =============================================================================
# Advanced Configuration (Optional)
# =============================================================================
# Number of recommendations to fetch from LastFM (default: 50)
LASTFM_RECOMMENDATIONS_LIMIT=50

# Minimum match score for track identification (0.0-1.0, default: 0.6)
TRACK_MATCH_THRESHOLD=0.6

# Enable additional features
ENABLE_WEBHOOK_NOTIFICATIONS=false
WEBHOOK_URL=https://your-webhook-url.com/musicspree

# Redis configuration (if using caching)
REDIS_URL=redis://redis:6379
REDIS_CACHE_TTL=3600

# Prometheus metrics (if using monitoring)
PROMETHEUS_ENABLED=false
PROMETHEUS_PORT=9091

# =============================================================================
# Security Configuration
# =============================================================================
# API rate limiting (requests per minute)
API_RATE_LIMIT=60

# Maximum file size for downloads (in MB)
MAX_DOWNLOAD_SIZE_MB=100

# Allowed audio formats (comma-separated)
ALLOWED_AUDIO_FORMATS=mp3,flac,m4a,ogg

# =============================================================================
# Docker-specific Configuration
# =============================================================================
# User ID and Group ID for file permissions
PUID=1001
PGID=1001

# Container restart policy
RESTART_POLICY=unless-stopped

# Health check interval (seconds)
HEALTHCHECK_INTERVAL=30

# =============================================================================
# Example Configurations for Different Use Cases
# =============================================================================

# Conservative setup (fewer downloads, more restrictive)
# CONCURRENT_DOWNLOADS=1
# MAX_DOWNLOAD_RETRIES=3
# LASTFM_RECOMMENDATIONS_LIMIT=25
# CRON_SCHEDULE=0 6 * * *

# Aggressive setup (more downloads, frequent updates)
# CONCURRENT_DOWNLOADS=5
# MAX_DOWNLOAD_RETRIES=10
# LASTFM_RECOMMENDATIONS_LIMIT=100
# CRON_SCHEDULE=0 */3 * * *

# Development setup
# NODE_ENV=development
# LOG_LEVEL=debug
# DRY_RUN=true
# RUN_ON_STARTUP=true

# =============================================================================
# Notes:
# - All services must be accessible from the MusicSpree container
# - Make sure your Navidrome user has admin privileges
# - Slskd must be properly configured with your Soulseek credentials
# - Consider your bandwidth and storage limitations when setting limits
# - Test your configuration with DRY_RUN=true before running in production
# =============================================================================